!function(){var e=window,n=document
e.stoveLog=new function(){function i(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0
return h[255&e]+h[e>>8&255]+h[e>>16&255]+h[e>>24&255]+"-"+h[255&n]+h[n>>8&255]+"-"+h[n>>16&15|64]+h[n>>24&255]+"-"+h[63&t|128]+h[t>>8&255]+"-"+h[t>>16&255]+h[t>>24&255]+h[255&i]+h[i>>8&255]+h[i>>16&255]+h[i>>24&255]}function s(e){var n=document.cookie.match(RegExp("(?:^|;\\s*)"+function(e){return e.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}(e)+"=([^;]*)"))
return n?n[1]:null}function a(t,i){var o=new Date
o.setTime(o.getTime()+31536e6)
var r="expires="+o.toUTCString(),c=new RegExp("([a-z-0-9]{2,63}).([a-z.]{2,5})$"),s=c.exec(e.location.hostname)
n.cookie=t+"="+i+";domain=."+s[0]+";path=/;"+r}for(var u=[],l=!1,d=!1,g={version:"v2.3",log_type:"web",agent:e.navigator.userAgent,url:e.location.href,referrer:n.referrer,user:"",view_id:void 0},h=[],v=0;v<256;v++)h[v]=(v<16?"0":"")+v.toString(16)
var f=function(){u.push(arguments)},m=function(){u.unshift(arguments)},_=function(){l=!0,d&&(d=!1,w())},w=function(){if(!l)return void(d=ture)
for(;u.length>0;)try{!function(){var e=u.shift(),n=e[e.length-1],t=stoveLog[n]
if(t&&"function"==typeof t){var i=t(e)
i&&c(o(i))}}()}catch(e){console.log(e)}}
this.uuid=function(){var e
return"undefined"!=typeof Storage&&(e=localStorage.sgs_da_uuid),!e&&navigator.cookieEnabled&&(e=s("sgs_da_uuid")),e}(),this.session=function(){var e
return"undefined"!=typeof Storage&&(e=localStorage.sgs_da_session),!e&&navigator.cookieEnabled&&(e=s("sgs_da_session")),e}(),this.create=function(e,n){g.user=e||"",g.environment=n||"unknown",console.error('this function deprecated. please change identity.\nexample> stoveLog.identity({ "view_id":Math.random(), "user":"4124832", "cli_type":"pc" });')},this.identity=function(e){m(e,"identityEvt"),_()},this.view=function(e){f(e,"viewEvt"),w()},this.click=function(e,n){f(e,n,"clickEvt"),w()},this.scroll=function(e,n){f(e,n,"scrollEvt"),w()},this.resize=function(e){f(e,"resizeEvt"),w()},f("init"),this.init=function(){"undefined"!=typeof Storage&&(g.uuid=localStorage.sgs_da_uuid,g.session=sessionStorage.sgs_da_session),navigator.cookieEnabled&&(g.uuid||(g.uuid=s("sgs_da_uuid")),g.session||(g.session=s("sgs_da_session"))),g.uuid||(g.uuid=i()),g.session||(g.session=i()),"undefined"!=typeof Storage&&(localStorage.sgs_da_uuid=g.uuid,sessionStorage.sgs_da_session=g.session),navigator.cookieEnabled&&(a("sgs_da_uuid",g.uuid),a("sgs_da_session",g.uuid))},this.identityEvt=function(e){var e=e[0]
g.game_code=e.game_code?e.game_code:"unknown",g.environment=e.environment?e.environment:"unknown",e.event_code&&(g.event_code=e.event_code),"unknown"!=g.game_code&&"unknown"!=g.environment||console.warn("check game_code or environment"),e.view_id?(g.view_id_type="manual",g.view_id=e.view_id):(g.view_id_type="auto",g.view_id=i()),g.cli_type=e.cli_type?e.cli_type:"undefined",g.user=e.user?e.user:g.user},this.viewEvt=function(i){"unknown"!=g.game_code&&"unknown"!=g.environment||console.warn("check game_code or environment")
var o=i[0]
g.view_id||console.warn('Please set "identity" function.\nexample> stoveLog.identity({ "view_id":Math.random(), "user":"4124832", "cli_type":"pc" });')
var c=t(g)
if(c.event="view",c.view_time=r(),c.url=e.location.href,c.referrer=n.referrer,e.performance&&e.performance.timing){var s=e.performance.timing
c.page_time={connection_time:s.connectEnd-s.navigationStart,request_time:s.responseEnd-s.requestStart,processing_time:s.loadEventEnd?s.loadEventEnd-s.domLoading:(new Date).getTime()-s.domLoading}}if(c.screen={width:screen.width,height:screen.height},c.size={width:e.innerWidth||n.body.clientWidth,height:e.innerHeight||n.body.clientHeight,scrollWidth:n.body.scrollWidth,scrollHeight:n.body.scrollHeight},"string"==typeof o)try{o=JSON.parse(o)}catch(e){console.warn('This parameter type is "string". Try JSON.parse(qs) result\n'+o),console.warn(e)}if("object"==typeof o)for(var a in o)c[a]=o[a]
else console.warn('You must set parameter type is "object".\nexample> stoveLog.view({ "view_area":"main", ... }); });\n'+o)
return c},this.clickEvt=function(i){"unknown"!=g.game_code&&"unknown"!=g.environment||console.warn("check game_code or environment")
var o=i[0],c=i[1]
g.view_id||console.warn('Please set "identity" function.\nexample> stoveLog.identity({ "view_id":Math.random(), "user":"4124832", "cli_type":"pc" });')
var s=t(g)
if(s.event="click",s.click_time=r(),c?(s.click_xy_scroll=document.body.scrollLeft+document.documentElement.scrollLeft+c.clientX+","+(document.body.scrollTop+document.documentElement.scrollTop+c.clientY),s.click_xy=c.clientX+","+c.clientY):console.warn('Please set "click event" parameter.\nexample> target.addEventListener("click", function(e){ stoveLog.click({ "click_area":"menu", "click_rank":"3", ... }, e); });'),s.url=e.location.href,s.referrer=n.referrer,s.screen={width:screen.width,height:screen.height},s.size={width:e.innerWidth||n.body.clientWidth,height:e.innerHeight||n.body.clientHeight,scrollWidth:n.body.scrollWidth,scrollHeight:n.body.scrollHeight},"string"==typeof o)try{o=JSON.parse(o)}catch(e){console.warn('This parameter type is "string". Try JSON.parse(qs) result\n'+o),console.warn(e)}if("object"==typeof o)for(var a in o)s[a]=o[a]
else console.warn('You must set parameter type is "object".\nexample> target.addEventListener("click", function(e){ stoveLog.click({ "click_area":"menu", "click_rank":"3", ... }, e); });\n'+o)
return s},this.scrollEvt=function(e){"unknown"!=g.game_code&&"unknown"!=g.environment||console.warn("check game_code or environment")
var n=(e[0],e[1],t(g))
return n.event="scroll",n},this.resizeEvt=function(i){"unknown"!=g.game_code&&"unknown"!=g.environment||console.warn("check game_code or environment")
var o=(i[0],t(g))
return o.event="resize",o.screen={width:screen.width,height:screen.height},o.size={width:e.innerWidth||n.body.clientWidth,height:e.innerHeight||n.body.clientHeight,scrollWidth:n.body.scrollWidth,scrollHeight:n.body.scrollHeight},o}}
var t=function(e){if(null==e||"object"!=typeof e)return e
var n=e.constructor()
for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])
return n},o=function(e){var n=typeof e
if("undefined"===n)return""
if("object"!=n||null===e)return"string"==n&&(e='"'+e+'"'),String(e)
var t,i,r=[],c=e&&e.constructor==Array
for(t in e)i=e[t],n=typeof i,"string"==n?i='"'+i+'"':"object"==n&&null!==i&&(i=o(i)),r.push((c?"":'"'+t+'":')+String(i))
return(c?"[":"{")+String(r)+(c?"]":"}")},r=function(){var e=function(e,n){var t=""
if(e=e.toString(),e.length<n)for(i=0;i<n-e.length;i++)t+="0"
return t+e},n=new Date
return e(n.getUTCFullYear(),4)+"-"+e(n.getUTCMonth()+1,2)+"-"+e(n.getUTCDate(),2)+" "+e(n.getUTCHours(),2)+":"+e(n.getUTCMinutes(),2)+":"+e(n.getUTCSeconds(),2)},c=function(t,i){var o=e.XMLHttpRequest
if(!o&&e.ActiveXObject)try{o=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{o=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){if("dev"==lD.environment)throw new Error("81plug ActiveXObject Error")
return!1}}if(!o)throw new Error("81plug http request Error")
var r=new o
return"withCredentials"in r&&(r.open("POST",function(){return"https:"==n.location.protocol?"https://logcs.81plug.com/game":"http://logcs.81plug.com/game"}(),!0),r.withCredentials=!0,r.onreadystatechange=function(){4==r.readyState&&i&&(i(),r=null)},r.send(t),!0)}}()
